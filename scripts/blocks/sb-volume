#!/bin/sh

# Get the volume line
vol_info="$(wpctl get-volume @DEFAULT_SINK@)"

# If muted, print ðŸ”‡ and exit
echo "$vol_info" | grep -q '\[MUTED\]' && echo ðŸ”‡ && exit

# Extract the raw float value (0.0 - 1.0)
vol_float=$(echo "$vol_info" | awk '{print $2}')

# Convert to percentage (0â€“100)
vol_int=$(printf "%.0f" "$(echo "$vol_float * 100" | bc -l)")

# Format volume string
vol_fmt=$(printf "%3d" "$vol_int")

# Choose icon
if [ "$vol_int" -ge 70 ]; then
    icon="ðŸ”Š"
elif [ "$vol_int" -ge 30 ]; then
    icon="ðŸ”‰"
elif [ "$vol_int" -ge 1 ]; then
    icon="ðŸ”ˆ"
else
    echo ðŸ”‡
    exit
fi

echo "$icon $vol_fmt%"


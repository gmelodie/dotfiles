#!/bin/sh

# Get the volume line
vol_info="$(wpctl get-volume @DEFAULT_SINK@)"

# Extract the raw float value (0.0 - 1.0)
vol_float=$(echo "$vol_info" | awk '{print $2}')

# Convert to percentage (0â€“100)
vol_int=$(printf "%.0f" "$(echo "$vol_float * 100" | bc -l)")

muted="$(echo "$vol_info" | awk '{print $3}')"

# Choose icon
if [ "$muted" = "[MUTED]" ]; then
    icon="ðŸ”‡"
elif [ "$vol_int" -ge 70 ]; then
    icon="ðŸ”Š"
elif [ "$vol_int" -ge 30 ]; then
    icon="ðŸ”‰"
else
    icon="ðŸ”ˆ"
fi

# Ensure output width is 6 characters (e.g., "ðŸ”Š  75% ")
printf "%s %3d%%" "$icon" "$vol_int"

